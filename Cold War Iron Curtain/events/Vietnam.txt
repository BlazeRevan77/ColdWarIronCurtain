 #############################
# Vietnam events
#############################

add_namespace = vie
add_namespace = join_vietnam_war
add_namespace = vie_peace
add_namespace = vietnam_exp
add_namespace = vin_ref
add_namespace = NLF_Flavor

country_event = {
	id = NLF_Flavor.1 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = NLF_Flavor.1"}
	title = "Southern Communists take Arms"
	desc = NLF_Flavor.1.d
	picture = GFX_NLF_1
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = "Damn It All"
		hidden_effect = {
			set_global_flag = Vietnam_War
			set_variable = { VIN.nlf_funding = 5 }
			set_variable = { SOV.nlf_funding = 20 }
			set_variable = { PRC.nlf_funding = 5 }
			
			set_variable = { NLF.global_nlf_funding = 30 }
		
			set_variable = { USA.vie_funding = 20 }
			
			set_variable = { VIE.global_vie_funding = 20 }
			NLF = { 
				transfer_state = 1286
				add_ideas = The_Vietnam_War_NLF
				if = {
					limit = { NOT = { has_war_with = VIE } }
					declare_war_on = { target = VIE type = annex_everything }
				}
				set_province_controller = 1400
				load_oob = NLF_1960
			}
			VIN = { add_ideas = The_Vietnam_War_VIN }
			add_ideas = The_Vietnam_War_VIE
			286 = { set_state_flag = NLF_Crushed }
			every_owned_state = {
				limit = {
					is_capital = no
				}
				start_resistance = yes
				add_resistance = 30
			}
		}
	}
}

news_event = {
	id = vie.1500 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vie.1500"}
	title = "[GetNewspaperHeader]French Victory in Indochina"
	desc = vie.1500.d
	picture = GFX_vie_1500

	major = yes

	is_triggered_only = yes

	option = {
		name = "A Major Victory for France"
	}
}
news_event = {
	id = NLF_Flavor.10 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = NLF_Flavor.10"}
	title = "[GetNewspaperHeader]The National Liberation Front"
	desc = NLF_Flavor.2.d
	picture = GFX_NLF_2

	major = yes

	is_triggered_only = yes

	option = {
		name = "Interesting"
	}
}

country_event = {
	id = vietnam_exp.1 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vietnam_exp.1"}
	title = "Vietnam Demands Southern China"
	desc = "Vietnam Demands Southern China"

	is_triggered_only = yes

	# Join
	option = {
		name = "Accept"
		VIN = {
			transfer_state = 599
			transfer_state = 594
			transfer_state = 593
			transfer_state = 592
			transfer_state = 591
		}
	  ai_chance = {
			factor = 50
		}
	}

	# Nope
	option = {
		name = "Reject the Demands"
	  ai_chance = {
		  factor = 50
		}
	}
}
country_event = {
  id = vin_ref.1 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vin_ref.1"}
	title = "North Vietnam Requests Unification"
	desc = "North Vietnam Requests Unification"

	is_triggered_only = yes

	# Join
	option = {
		name = "End the War"
		VIN = { change_tag_from = VIE }
		VIN = { annex_country = { target = VIE } }
		set_global_flag = vietnam_war_over
	  ai_chance = {
			factor = 75
		}
	}

	# Nope
	option = {
		name = "Continue the War"
	  ai_chance = {
		  factor = 25
		}
	}
}
country_event = {
  id = vie_peace.1 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vie_peace.1"}
	title = "South Vietnam Requests Peace"
	desc = "South Vietnam Requests Peace"

	is_triggered_only = yes

	# Join
	option = {
		name = "End the War"
		white_peace = VIN
		set_global_flag = vietnam_war_over
	  ai_chance = {
			factor = 75
		}
	}

	# Nope
	option = {
		name = "Continue the War"
	  ai_chance = {
		  factor = 25
		}
	}
}
country_event = {
  id = join_vietnam_war.1 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = join_vietnam_war.1"}
	title = "Enter the Vietnam War?"
	desc = "Enter the Vietnam War?"

	is_triggered_only = yes

	# Join
	option = {
		name = "Enter the War"
		add_to_war = { targeted_alliance = VIE enemy = VIN }
	  ai_chance = {
			factor = 85
		}
	}

	# Nope
	option = {
		name = "Do not enter the war"
	  ai_chance = {
		  factor = 15
		}
	}
}
# The Geneva Conference (hidden trigger)
country_event = {
	id = vie.1 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vie.1"}
	hidden = yes

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		FRA = { country_event = vie.2 }
		VIE = { country_event = vie.4 }
	}
}

# The Geneva Conference (Preload)
country_event = {
	id = vie.2 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vie.2"}
	title = vie.2.t
	desc = vie.2.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = vie.2.a
		hidden_effect = {
			set_global_flag = FRA_yes_Geneva
		}
		ai_chance = {
			factor = 98
		}
	}

	option = {
		name = vie.2.b
		ai_chance = {
			factor = 2
		}
	}

}

# The Geneva Conference
news_event = {
	id = vie.3 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vie.3"}
	title = vie.3.t
	desc = vie.3.d
	picture = GFX_report_event_geneve_accords

	is_triggered_only = yes

	major = yes

	immediate = {
		hidden_effect = {
			country_event = vie.5
			set_global_flag = Geneva_Conference
			clr_country_flag = indochina_french_war
		}
	}

	option = {
		name = vie.3.a
		trigger = { tag = VIN }
	}

	option = {
		name = vie.3.b
		trigger = { NOT = { tag = VIN } }
	}
}

# The Geneva Conference (Preload)
country_event = {
	id = vie.4 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vie.4"}
	title = vie.4.t
	desc = vie.4.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = vie.4.a

		hidden_effect = {
			set_global_flag = VIE_yes_Geneva
		}
		ai_chance = {
			factor = 98
		}
	}

	option = {
		name = vie.4.b
		ai_chance = {
			factor = 2
		}
	}

}

# The Geneva Conference
country_event = {
	id = vie.5 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vie.5"}
	hidden = yes

	fire_only_once = yes

	is_triggered_only = yes

	immediate = {
		FRA = {
			white_peace = VIN
			set_autonomy = { target = CAM autonomy_state = autonomy_free }
			set_autonomy = { target = VIE autonomy_state = autonomy_free }
			set_autonomy = { target = LOS autonomy_state = autonomy_free }
		}
		VIE = {
			white_peace = VIN
			transfer_state = 757
			transfer_state = 982
			transfer_state = 286
			transfer_state = 1287
			transfer_state = 983
			leave_faction = yes
		}
		VIN = {
			transfer_state = 838
			transfer_state = 786
			transfer_state = 671
			transfer_state = 881
			transfer_state = 1280
			transfer_state = 1281
			set_capital = { state = 786 }
			complete_national_focus = VIN_Ratification_of_the_Geneva_Accords
		}
		CAM = {
			drop_cosmetic_tag = yes
			white_peace = VIN
			leave_faction = yes

		}
		LOS = {
			drop_cosmetic_tag = yes
			white_peace = VIN
			leave_faction = yes

		}

		country_event = { id = vie.6 days = 1 } 
	}

	option = { }

}
# 17th North / South DMZ failsafe event
country_event = {
	id = vie.6 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vie.6"}
	hidden = yes

	fire_only_once = yes

	is_triggered_only = yes

	immediate = {

	}

	option = { }

}
# FRA win against VIN
country_event = {
	id = vie.7 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = vie.7"}
	hidden = yes

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		FRA = {
			white_peace = VIN
			annex_country = { target = VIN transfer_troops = no }
		}
	}
}

# Startup, spit out French Cochinchina

country_event = {
  id = vie.10
  hidden = yes
  
  is_triggered_only = yes
  
  immediate = {
    log = "[GetDateText]: [Root.GetTag]: id = vie.10"
	}
	
	immediate = {
	  #FRA = {
	  #  activate_mission = VIE_Mission_Merge_With_French_Cochinchina
    #  if = {
    #    limit = { has_dlc = "Together for Victory" }
    #    set_autonomy = {
    #  		target = NLF
    #  		autonomous_state = autonomy_protectorate
    #  		freedom_level = 0.1
    #  	 }
    #  }
    #  else = {
    #    puppet = NLF
    #  }
	  #}
	  #NLF = {
	  #  gets control of south vietnam
	  #  setup govt of french cochinchina
	  #  set_cosmetic_tag = NLF_FRA
	  #}
	  # activate_mission = VIE_Mission_Merge_With_French_Cochinchina
	}
}

# Merge with French Cochinchina

news_event = {
  id = vie.11
  title = vie.11.t
  desc = vie.11.d
  
  is_triggered_only = yes
  major = no
  
  immediate = {
    log = "[GetDateText]: [Root.GetTag]: id = vie.11"
  }
  
  option = {
    name = vie.11.a # One step closer to a united Vietnam
    trigger = { tag = VIE }
    
    add_war_support = 0.025
    add_political_power = 50
    
    annex_country = {
      target = NLF
      transfer_troops = no
    }
    
    hidden_effect = {
      LAO = { news_event = vie.11 }
      CAM = { news_event = vie.11 }
      VIN = { news_event = vie.11 }
      
      NLF = {
        drop_cosmetic_tag = yes
        # reset country
      }
    }
  }
  option = {
    name = vie.11.a # One step closer to a united Vietnam
    trigger = { tag = VIN }
    add_war_support = 0.025
  }
  option = {
    name = vie.11.b # We've been putting it off for a while...
    trigger = { tag = FRA }
    
    custom_effect_tooltip = vie.11.b_tt
    
    hidden_effect = {
      if = {
        limit = {
          has_dlc = "Together for Victory"
        }
        #set_autonomy = {
      	#	target = NLF
      	#	autonomous_state = autonomy_free
      	#	freedom_level = 1.0
      	#}
      }
      else = {
        # release = NLF
      }
      
      ENG = { news_event = vie.11 }
      USA = { news_event = vie.11 }
      CHI = { news_event = vie.11 }
      PRC = { news_event = vie.11 }
      SOV = { news_event = vie.11 }
    }
  }
  option = {
    name = vie.11.c # Decolonization or a Smoke Screen?
    trigger = { OR = { tag = LAO tag = CAM } }
  }
  option = {
    name = vie.11.e # Hopefully a new ally against the Red
    trigger = { OR = { tag = ENG tag = USA tag = CHI } }
  }
  option = {
    name = vie.11.f # Pah! A new name for the same abuse!
    trigger = { OR = { tag = PRC tag = SOV } }
  }
}







